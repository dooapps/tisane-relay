{
    # Global options
    email {$ACME_EMAIL}
}

{$DOMAIN_NAME} {
    # Reverse proxy to the relay container
    reverse_proxy tisane-relay:8080

    # Rate limiting: 10 requests per second per IP
    rate_limit {
        zone static_zone {
            key {remote_host}
            events 10
            window 1s
        }
    }

    # Limit request body size to 5MB (MITIGATE: DoS via large payloads)
    request_body {
        max_size 5MB
    }

    header {
        # Security headers
        Strict-Transport-Security "max-age=31536000;"
        X-Content-Type-Options "nosniff"
        X-Frame-Options "DENY"
    }

    log {
        output stdout
    }
}
